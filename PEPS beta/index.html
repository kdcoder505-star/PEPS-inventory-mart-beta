<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PEPS Mart – Full Cart with Counts</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{
  --green:#28a745;
  --green-dark:#1e7e34;
  --light:#f8fff8;
}
body{font-family:'Inter',sans-serif;background:var(--light);}
.navbar{box-shadow:0 2px 5px rgba(0,0,0,.05);}
.hero{
  height:100vh;
  background:linear-gradient(rgba(40,167,69,.65),rgba(40,167,69,.65)),
             url('https://placehold.co/1600x900/28a745/fff?text=PEPS+Mart') center/cover;
  color:#fff;display:flex;align-items:center;text-align:center;
}
.hero h1{font-size:3rem;font-weight:700;}
.category-btns button{margin:.2rem;}
.product-card{
  border:none;border-radius:.5rem;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
  transform:translateY(20px);opacity:0;
  animation:slideUp .6s forwards;
}
@keyframes slideUp{to{transform:translateY(0);opacity:1;}}
.product-card img{height:210px;object-fit:contain;background:#fff;transition:transform .4s;}
.product-card:hover img{transform:scale(1.05);}
.product-card .badge{
  font-size:.8rem;
  padding:.35em .5em;
}
.cart-panel{
  background:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,.05);
  border-radius:.5rem;
  padding:1rem;
}
.cart-item{border-bottom:1px solid #eee;padding:.5rem 0;}
.cart-total{font-weight:700;font-size:1.1rem;}
footer{background:var(--green-dark);color:#fff;text-align:center;padding:1.5rem 0;}
</style>
</head>
<body>

<!-- NAV -->
<nav class="navbar navbar-expand-lg bg-white sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold text-success" href="#">PEPS Mart</a>
    <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#shop">Shop</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="loginMenu" data-bs-toggle="dropdown">Login</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="customerLogin.html">Customer</a></li>
            <li><a class="dropdown-item" href="staffLogin.html">Staff</a></li>
            <li><a class="dropdown-item" href="adminLogin.html">Admin</a></li>
          </ul>
        </li>
        <li class="nav-item ms-3">
          <a href="#cartPanel" class="btn btn-success position-relative">
            <i class="fas fa-shopping-cart"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cartBadge">0</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- HERO -->
<header class="hero">
  <div class="container">
    <h1>Shop &amp; Send Request Easily</h1>
    <p>Add products to your cart below, then send one request when done.</p>
    <a href="#shop" class="btn btn-light btn-lg mt-3">Start Shopping</a>
  </div>
</header>

<!-- SHOP -->
<section id="shop" class="py-5">
  <div class="container">
    <h2 class="text-center fw-bold mb-4 text-success">Shop Our Products</h2>
    <p class="text-center text-muted mb-5">Choose items and see your cart just below.</p>
    <div class="text-center category-btns mb-4" id="catBtns"></div>
    
    <div class="table-responsive">
      <table class="table table-striped align-middle text-center">
        <thead class="table-success">
          <tr>
            <th>Image</th>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="gallery"></tbody>
      </table>
    </div>
    


    <!-- CART PANEL -->
    <div class="cart-panel mt-5" id="cartPanel">
      <h5 class="fw-bold mb-3">
        <i class="fas fa-shopping-cart me-2"></i>Your Cart
        <span class="badge bg-success ms-2" id="cartCountText">0 items</span>
      </h5>
      <div id="cartList" class="mb-3"></div>
      <div class="d-flex justify-content-between align-items-center">
        <div class="cart-total">Total: ₹<span id="cartTotal">0</span></div>
        <button class="btn btn-success" id="sendRequestBtn">Send Request</button>
      </div>
      <form id="checkoutForm" class="mt-3" style="display:none;">
        <input class="form-control mb-2" placeholder="Full Name*" id="fname" required>
        <input type="email" class="form-control mb-2" placeholder="Email*" id="email" required>
        <button class="btn btn-success w-100">Confirm & Send</button>
      </form>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <p class="mb-0">&copy; 2024 PEPS Mart</p>
  <small>Quality electronics delivered with care.</small>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// ==== Products ====


const products=[
 {id:'1',name:'Jam',price:52,cat:'Food',img:'https://placehold.co/60x60?text=Jam',stock:4},
 {id:'2',name:'Headphones',price:2000,cat:'Accessories',img:'https://placehold.co/60x60?text=Headphones',stock:3},
 {id:'3',name:'Laptop',price:30000,cat:'Electronics',img:'https://placehold.co/60x60?text=Laptop',stock:7},
 {id:'4',name:'Battery',price:60,cat:'Electronics',img:'https://placehold.co/60x60?text=Battery',stock:23},
 {id:'5',name:'Smartphone',price:15000,cat:'Mobile',img:'https://placehold.co/60x60?text=Phone',stock:12},
 {id:'6',name:'Keyboard',price:500,cat:'Accessories',img:'https://placehold.co/60x60?text=Keyboard',stock:9}
];


let cart=[];

// ==== Category Buttons ====
const cats=['All',...new Set(products.map(p=>p.cat))];
const catBtns=document.getElementById('catBtns');
cats.forEach(c=>{
  const b=document.createElement('button');
  b.className='btn btn-outline-success';
  b.textContent=c;
  b.onclick=()=>renderGallery(c);
  catBtns.appendChild(b);
});

// ==== Render Products ====

function renderGallery(cat='All'){
  const g=document.getElementById('gallery');
  g.innerHTML='';
  products.filter(p=>cat==='All'||p.cat===cat).forEach((p,i)=>{
    const qty = cart.find(x=>x.id===p.id)?.qty || 0;
    g.innerHTML+=`
      <tr>
        <td><img src="${p.img}" alt="${p.name}" style="width:60px;height:60px;object-fit:contain"></td>
        <td>${p.name}</td>
        <td>${p.cat}</td>
        <td>₹${p.price}</td>
        <td>${p.stock}</td>
        <td><button class="btn btn-success btn-sm" onclick="addToCart('${p.id}')">Add to Cart</button></td>
      </tr>`;
  });
}
renderGallery();


// ==== Cart Logic ====
function addToCart(id){
  const p=products.find(x=>x.id===id);
  const ex=cart.find(x=>x.id===id);
  ex?ex.qty++:cart.push({id:p.id,name:p.name,price:p.price,qty:1});
  updateCartUI();
}
function changeQty(id,val){
  const item=cart.find(x=>x.id===id);
  if(item)item.qty=parseInt(val)||1;
  updateCartUI();
}
function removeItem(id){
  cart=cart.filter(x=>x.id!==id);
  updateCartUI();
}

// ==== Update Cart + Badges ====
function updateCartUI(){
  const list=document.getElementById('cartList');
  const totalEl=document.getElementById('cartTotal');
  const badge=document.getElementById('cartBadge');
  const countTxt=document.getElementById('cartCountText');

  list.innerHTML=''; let total=0; let qty=0;
  if(!cart.length){
    list.innerHTML='<p class="text-muted text-center">Your cart is empty</p>';
    totalEl.textContent='0';
    badge.textContent='0';
    countTxt.textContent='0 items';
    document.getElementById('checkoutForm').style.display='none';
    document.getElementById('sendRequestBtn').style.display='inline-block';
  }else{
    cart.forEach(item=>{
      total+=item.price*item.qty;
      qty+=item.qty;
      list.innerHTML+=`
        <div class="cart-item d-flex justify-content-between align-items-center">
          <div><strong>${item.name}</strong> <small class="text-muted">₹${item.price}</small></div>
          <div class="d-flex align-items-center">
            <input type="number" min="1" value="${item.qty}" class="form-control form-control-sm me-2"
              onchange="changeQty('${item.id}',this.value)">
            <button class="btn btn-sm btn-danger" onclick="removeItem('${item.id}')"><i class="fas fa-times"></i></button>
          </div>
        </div>`;
    });
    totalEl.textContent=total;
    badge.textContent=qty;
    countTxt.textContent=`${qty} item${qty>1?'s':''}`;
  }

  // update badges on cards
  products.forEach(p=>{
    const q=cart.find(x=>x.id===p.id)?.qty || 0;
    const el=document.getElementById(`badge-${p.id}`);
    if(el){
      el.textContent=q;
      el.style.display=q?'inline-block':'none';
    }
  });
}

// ==== Checkout ====
document.getElementById('sendRequestBtn').addEventListener('click',()=>{
  if(!cart.length){alert('Cart is empty!');return;}
  document.getElementById('checkoutForm').style.display='block';
  document.getElementById('sendRequestBtn').style.display='none';
});
document.getElementById('checkoutForm').addEventListener('submit',e=>{
  e.preventDefault();
  alert(`Thanks ${document.getElementById('fname').value}! Your request was sent.`);
  cart=[]; updateCartUI(); e.target.reset();
});
</script>
</body>
</html>
